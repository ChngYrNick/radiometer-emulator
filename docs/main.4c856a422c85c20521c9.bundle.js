(()=>{var s={575:e=>{function t(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}e.exports=t},913:e=>{function n(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function t(e,t,s){if(t)n(e.prototype,t);if(s)n(e,s);return e}e.exports=t}};var n={};function l(e){if(n[e]){return n[e].exports}var t=n[e]={exports:{}};s[e](t,t.exports,l);return t.exports}(()=>{l.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;l.d(t,{a:t});return t}})();(()=>{l.d=(e,t)=>{for(var s in t){if(l.o(t,s)&&!l.o(e,s)){Object.defineProperty(e,s,{enumerable:true,get:t[s]})}}}})();(()=>{l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})();(()=>{"use strict";var e=l(575);var t=l.n(e);var s=l(913);var n=l.n(s);function i(e,t){return Math.floor(Math.random()*(t-e)+e)}var a=function(){function e(){t()(this,e);this.imp={field:[],drug:[],lead:[],steel:[],aluminum:[]};this.minutes=1;this.isRunning=false;this.type="field";this.intervals=[];this.timeouts=[];this.updateDisplay(0);this.rotateKnob(1);this.resetLamps();document.querySelector("[data-type='".concat(this.type,"']")).classList.toggle("active-panel-btn")}n()(e,[{key:"resetLamps",value:function e(s){var n=this;var t=Object.values(document.getElementsByClassName("lamp"));t.filter(function(e){return e.classList.contains("active-lamp")}).forEach(function(e){return e.classList.toggle("active-lamp")});t.filter(function(e,t){return t<(s||n.minutes)}).forEach(function(e){return e.classList.toggle("active-lamp")})}},{key:"rotateKnob",value:function e(t){if(!this.isRunning&&!t){document.getElementById("audio-rotate-knob-right").cloneNode(true).play();this.minutes=this.minutes===5?this.minutes=1:this.minutes+=1;this.resetLamps()}if(t){document.getElementById("audio-rotate-knob-left").cloneNode(true).play()}var s=document.getElementById("knob");switch(t||this.minutes){case 1:if(t)this.resetLamps(t);s.style.transform="rotate(-40deg)";break;case 2:if(t)this.resetLamps(t);s.style.transform="rotate(-25deg)";break;case 3:if(t)this.resetLamps(t);s.style.transform="rotate(0deg)";break;case 4:if(t)this.resetLamps(t);s.style.transform="rotate(25deg)";break;case 5:if(t)this.resetLamps(t);s.style.transform="rotate(40deg)";break;default:}}},{key:"runTimer",value:function e(t){var s=this;this.generateImps();var n=0;this.intervals.push(setInterval(function(){n+=1;s.updateDisplay(n)},Math.floor(6e4/this.imp[this.type][this.imp[this.type].length-1])));var i=0;this.intervals.push(setInterval(function(){i+=1;return i%2?document.getElementById("audio-tick-2").cloneNode(true).play():document.getElementById("audio-tick-1").cloneNode(true).play()},1e3));this.intervals.push(setInterval(function(){Object.values(document.getElementsByClassName("lamp"))[t-1].classList.toggle("active-lamp")},1e3));this.timeouts.push(setTimeout(function(){s.intervals.forEach(function(e){return clearInterval(e)});s.intervals=[];s.draw();s.updateDisplay(0);if(t-1>0){s.rotateKnob(t-1);s.runTimer(t-1);return}document.getElementById("audio-loop-end").cloneNode(true).play();s.rotateKnob(s.minutes);s.isRunning=false;document.getElementById("start-btn").classList.toggle("active-btn")},6e4))}},{key:"generateImps",value:function e(){if(this.imp[this.type].length>=this.minutes){this.imp[this.type]=[]}switch(this.type){case"field":this.imp[this.type].push(i(13,17));break;case"drug":this.imp[this.type].push(i(18,22));break;case"lead":this.imp[this.type].push(i(17,21));break;case"steel":this.imp[this.type].push(i(15,19));break;case"aluminum":this.imp[this.type].push(i(16,20));break;default:}}},{key:"updateDisplay",value:function e(t){var s=t.toString().length;switch(s){case 1:this.display="000".concat(t);break;case 2:this.display="00".concat(t);break;case 3:this.display="0".concat(t);break;case 4:this.display=t.toString();break;default:this.display="0000"}document.getElementById("dial").innerHTML=this.display}},{key:"reset",value:function e(){this.imp={field:[],drug:[],lead:[],steel:[],aluminum:[]};this.intervals.forEach(function(e){return clearInterval(e)});this.intervals=[];this.timeouts.forEach(function(e){return clearTimeout(e)});this.timeouts=[];this.minutes=1;this.isRunning=false;document.getElementById("start-btn").classList.remove("active-btn");this.updateDisplay(0);this.rotateKnob(1);this.draw()}},{key:"draw",value:function e(){var t=document.getElementById("table");t.style.display="none";Object.values(document.getElementsByClassName("temp-row")).forEach(function(e){e.parentNode.removeChild(e)});if(!this.imp.field.length){t.style.display="table";return}for(var s=0;s<this.minutes;s+=1){var n=t.insertRow(3+s);n.classList.add("temp-row");var i=n.insertCell();i.innerHTML=s+1;i=n.insertCell();i.innerHTML=this.imp.field[s]||" ";i=n.insertCell();i.innerHTML=this.imp.drug[s]||" ";i=n.insertCell();i.innerHTML=this.imp.lead[s]||" ";if(!s){i=n.insertCell();i.innerHTML="4.6";i.rowSpan="".concat(this.minutes)}i=n.insertCell();i.innerHTML=this.imp.steel[s]||" ";if(!s){i=n.insertCell();i.innerHTML="5.9";i.rowSpan="".concat(this.minutes)}i=n.insertCell();i.innerHTML=this.imp.aluminum[s]||" ";if(!s){i=n.insertCell();i.innerHTML="5.9";i.rowSpan="".concat(this.minutes)}}t.style.display="table"}},{key:"start",value:function e(){this.isRunning=true;this.runTimer(this.minutes)}}]);return e}();var r=new a;document.getElementById("start-btn").addEventListener("click",function(e){if(r.isRunning)return;document.getElementById("audio-start-btn").cloneNode(true).play();r.start();e.target.classList.toggle("active-btn")},false);document.getElementById("reset-btn").addEventListener("click",function(){r.reset()},false);document.getElementById("knob").addEventListener("click",function(){r.rotateKnob()},false);Object.values(document.getElementById("control-panel").children).forEach(function(s){s.addEventListener("click",function(){if(r.isRunning)return;var e=document.getElementById("drug");var t=document.getElementById("plate");e.style.top="0px";t.style.top="0px";document.getElementById("audio-switch-type").cloneNode(true).play();document.querySelector("[data-type='".concat(r.type,"']")).classList.toggle("active-panel-btn");r.type=s.dataset.type;document.querySelector("[data-type='".concat(r.type,"']")).classList.toggle("active-panel-btn");switch(r.type){case"field":break;case"drug":e.style.display="block";e.style.top="175px";break;case"lead":t.style.display="block";t.style.top="150px";t.style.backgroundColor="#90939f";e.style.display="block";e.style.top="175px";break;case"steel":t.style.display="block";t.style.top="150px";t.style.backgroundColor="#a8aeb1";e.style.display="block";e.style.top="175px";break;case"aluminum":t.style.display="block";t.style.top="150px";t.style.backgroundColor="#c0c0c0";e.style.display="block";e.style.top="175px";break;default:}},false)})})()})();