(()=>{var n={575:e=>{function t(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}e.exports=t},913:e=>{function s(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||false;s.configurable=true;if("value"in s)s.writable=true;Object.defineProperty(e,s.key,s)}}function t(e,t,n){if(t)s(e.prototype,t);if(n)s(e,n);return e}e.exports=t}};var s={};function l(e){if(s[e]){return s[e].exports}var t=s[e]={exports:{}};n[e](t,t.exports,l);return t.exports}(()=>{l.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;l.d(t,{a:t});return t}})();(()=>{l.d=(e,t)=>{for(var n in t){if(l.o(t,n)&&!l.o(e,n)){Object.defineProperty(e,n,{enumerable:true,get:t[n]})}}}})();(()=>{l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})();(()=>{"use strict";var e=l(575);var t=l.n(e);var n=l(913);var s=l.n(n);function i(e,t){return Math.floor(Math.random()*(t-e)+e)}var a=function(){function e(){t()(this,e);this.imp={field:[],drug:[],lead:[],steel:[],aluminum:[]};this.minutes=1;this.isRunning=false;this.type="field";this.intervals=[];this.timeouts=[];this.datePast=new Date;this.dateNow=new Date;this.updateDisplay(0);this.rotateKnob(1);this.resetLamps();document.querySelector("[data-type='".concat(this.type,"']")).classList.toggle("active-panel-btn")}s()(e,[{key:"setDate",value:function e(t,n){this.datePast=t;this.dateNow=n}},{key:"setTimer",value:function e(){var t=document.getElementById("timer");var n=Math.abs(this.dateNow-this.datePast)/1e3;var s=Math.floor(n/60)%60;var i=Math.floor(n%60);t.innerHTML="".concat(s,":").concat(i.toString().length<2?"0".concat(i):i)}},{key:"resetLamps",value:function e(n){var s=this;var t=Object.values(document.getElementsByClassName("lamp"));t.filter(function(e){return e.classList.contains("active-lamp")}).forEach(function(e){return e.classList.toggle("active-lamp")});t.filter(function(e,t){return t<(n||s.minutes)}).forEach(function(e){return e.classList.toggle("active-lamp")})}},{key:"rotateKnob",value:function e(t){if(!this.isRunning&&!t){document.getElementById("audio-rotate-knob-right").cloneNode(true).play();this.minutes=this.minutes===5?this.minutes=1:this.minutes+=1;this.resetLamps()}if(t){document.getElementById("audio-rotate-knob-left").cloneNode(true).play()}var n=document.getElementById("knob");switch(t||this.minutes){case 1:if(t)this.resetLamps(t);n.style.transform="rotate(-40deg)";break;case 2:if(t)this.resetLamps(t);n.style.transform="rotate(-25deg)";break;case 3:if(t)this.resetLamps(t);n.style.transform="rotate(0deg)";break;case 4:if(t)this.resetLamps(t);n.style.transform="rotate(25deg)";break;case 5:if(t)this.resetLamps(t);n.style.transform="rotate(40deg)";break;default:}}},{key:"runTimer",value:function e(t,n){var s=this;this.setDate(new Date,new Date);this.setTimer();this.generateImps();var i=n||0;this.intervals.push(setInterval(function(){i+=1;s.updateDisplay(i)},Math.floor(6e4/this.imp[this.type][this.imp[this.type].length-1])));var a=0;this.intervals.push(setInterval(function(){s.setDate(s.datePast,new Date);s.setTimer();a+=1;return a%2?document.getElementById("audio-tick-2").cloneNode(true).play():document.getElementById("audio-tick-1").cloneNode(true).play()},1e3));this.intervals.push(setInterval(function(){Object.values(document.getElementsByClassName("lamp"))[t-1].classList.toggle("active-lamp")},1e3));this.timeouts.push(setTimeout(function(){s.intervals.forEach(function(e){return clearInterval(e)});s.intervals=[];s.draw();s.setDate(new Date,new Date);s.setTimer();if(t-1>0){s.updateDisplay(i+1);s.rotateKnob(t-1);s.runTimer(t-1,i+1);return}document.getElementById("audio-loop-end").cloneNode(true).play();s.rotateKnob(s.minutes);s.isRunning=false;document.getElementById("start-btn").classList.toggle("active-btn")},6e4))}},{key:"generateImps",value:function e(){if(this.imp[this.type].length>=this.minutes){this.imp[this.type]=[]}switch(this.type){case"field":this.imp[this.type].push(i(13,17));break;case"drug":this.imp[this.type].push(i(18,22));break;case"lead":this.imp[this.type].push(i(17,21));break;case"steel":this.imp[this.type].push(i(15,19));break;case"aluminum":this.imp[this.type].push(i(16,20));break;default:}}},{key:"updateDisplay",value:function e(t){var n=t.toString().length;switch(n){case 1:this.display="000".concat(t);break;case 2:this.display="00".concat(t);break;case 3:this.display="0".concat(t);break;case 4:this.display=t.toString();break;default:this.display="0000"}document.getElementById("dial").innerHTML=this.display}},{key:"reset",value:function e(){this.intervals.forEach(function(e){return clearInterval(e)});this.intervals=[];this.timeouts.forEach(function(e){return clearTimeout(e)});this.timeouts=[];this.setDate(new Date,new Date);this.setTimer();this.minutes=1;this.isRunning=false;document.getElementById("start-btn").classList.remove("active-btn");this.updateDisplay(0);this.rotateKnob(1)}},{key:"clearTable",value:function e(){if(this.isRunning){return}this.imp={field:[],drug:[],lead:[],steel:[],aluminum:[]};this.draw()}},{key:"draw",value:function e(){var t=document.getElementById("table");t.style.display="none";Object.values(document.getElementsByClassName("temp-row")).forEach(function(e){e.parentNode.removeChild(e)});if(!this.imp.field.length){t.style.display="table";return}for(var n=0;n<this.minutes;n+=1){var s=t.insertRow(3+n);s.classList.add("temp-row");var i=s.insertCell();i.innerHTML=n+1;i=s.insertCell();i.innerHTML=this.imp.field[n]||" ";i=s.insertCell();i.innerHTML=this.imp.drug[n]||" ";i=s.insertCell();i.innerHTML=this.imp.lead[n]||" ";if(!n){i=s.insertCell();i.innerHTML="4.6";i.rowSpan="".concat(this.minutes)}i=s.insertCell();i.innerHTML=this.imp.steel[n]||" ";if(!n){i=s.insertCell();i.innerHTML="5.9";i.rowSpan="".concat(this.minutes)}i=s.insertCell();i.innerHTML=this.imp.aluminum[n]||" ";if(!n){i=s.insertCell();i.innerHTML="5.9";i.rowSpan="".concat(this.minutes)}}t.style.display="table"}},{key:"start",value:function e(){this.isRunning=true;this.runTimer(this.minutes)}}]);return e}();var r=new a;r.setTimer();document.getElementById("start-btn").addEventListener("click",function(e){if(r.isRunning)return;document.getElementById("audio-start-btn").cloneNode(true).play();r.start();e.target.classList.toggle("active-btn")},false);document.getElementById("clear-table-btn").addEventListener("click",function(){r.clearTable()},false);document.getElementById("reset-btn").addEventListener("click",function(){r.reset()},false);document.getElementById("knob").addEventListener("click",function(){r.rotateKnob()},false);Object.values(document.getElementById("control-panel").children).forEach(function(s){s.addEventListener("click",function(){if(r.isRunning)return;var e=document.getElementById("drug");var t=document.getElementById("plate");var n=document.getElementById("plate-text-field").children[0];e.style.top="0px";t.style.top="0px";document.getElementById("audio-switch-type").cloneNode(true).play();document.querySelector("[data-type='".concat(r.type,"']")).classList.toggle("active-panel-btn");r.type=s.dataset.type;document.querySelector("[data-type='".concat(r.type,"']")).classList.toggle("active-panel-btn");switch(r.type){case"field":break;case"drug":e.style.display="block";e.style.top="175px";break;case"lead":t.style.display="block";t.style.top="150px";e.style.display="block";e.style.top="175px";n.innerHTML="lead";break;case"steel":t.style.display="block";t.style.top="150px";e.style.display="block";e.style.top="175px";n.innerHTML="steel";break;case"aluminum":t.style.display="block";t.style.top="150px";e.style.display="block";e.style.top="175px";n.innerHTML="aluminum";break;default:}},false)})})()})();